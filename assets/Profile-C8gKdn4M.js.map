{"version":3,"file":"Profile-C8gKdn4M.js","sources":["../../../../../../../../images/logo.png","../../src/components/AvatarUpload.vue","../../src/views/Profile.vue"],"sourcesContent":["export default \"__VITE_PUBLIC_ASSET__c3f4077f__\"","<template>\n  <div class=\"avatar-upload\">\n    <div class=\"avatar-preview\">\n      <img :src=\"userAvatar\" alt=\"Áî®Êà∑Â§¥ÂÉè\" class=\"avatar-image\">\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { useUserStore } from '../stores/user';\n\nconst userStore = useUserStore();\nconst defaultAvatar = '/public/images/default-avatar.jpg';\n\nconst userAvatar = computed(() => {\n  return userStore.userProfile?.photoURL || defaultAvatar;\n});\n</script>\n\n<style scoped>\n.avatar-upload {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n.avatar-preview {\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 3px solid #b388eb;\n}\n\n.avatar-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n</style> ","<template>\n  <div class=\"profile-layout\">\n    <!-- Â∑¶‰æßÔºö‰∏™‰∫∫‰ø°ÊÅØ + ‰æßËæπËèúÂçï -->\n    <aside class=\"profile-sidebar\">\n      <div class=\"profile-card\">\n        <AvatarUpload />\n        <h2>üë§ {{ userStore.userProfile?.displayName || 'User' }}</h2>\n      </div>\n\n      <div class=\"profile-menu\">\n        <ul>\n          <li><a href=\"#\" @click=\"showSection('default')\">üè† Profile Home</a></li>\n          <!-- <li><a href=\"#\" @click=\"showSection('friends')\">üë• My Friends</a></li>\n          <li><a href=\"#\" @click=\"showSection('recommendations')\">‚ú® People You May Know</a></li> -->\n          <li><a href=\"#\" @click=\"showSection('published')\">üìÖ Published Events</a></li>\n          <!-- <li><a href=\"#\" @click=\"showSection('participated')\">üéØ Participated Events</a></li> -->\n          <li><a href=\"#\" @click=\"showSection('achievements')\">üèÜ Your Achievement</a></li>\n        </ul>\n      </div>\n    </aside>\n\n    <!-- Âè≥‰æßÔºö‰∏™‰∫∫‰ø°ÊÅØÂíåÁ§æ‰∫§Âä®ÊÄÅ -->\n    <main class=\"profile-main\">\n      <!-- ÈªòËÆ§È°µÈù¢ÔºàÂü∫Êú¨‰ø°ÊÅØ & Á§æ‰∫§Âä®ÊÄÅÔºâ -->\n      <div v-show=\"currentSection === 'default'\" id=\"default-content\">\n        <h2>üëã This is your profile!</h2>\n        \n        <!-- ‰∏™‰∫∫‰ø°ÊÅØ -->\n        <div class=\"profile-info\">\n          <h3>üìÑ Basic Information</h3>\n          <p>üéì Major: Computer Science & Math</p>\n          <p>üìû Contact: {{ userStore.userProfile?.email }}</p>\n        </div>\n\n        <!-- ‰∏™‰∫∫Ê†áÁ≠æ -->\n        <div class=\"profile-tags\">\n          <h3>üè∑Ô∏è Personal Tags</h3>\n          <ul>\n            <li>üíª Computer Science & Math</li>\n            <li>üè† Dorm: McCarty Hall</li>\n            <li>üé≠ Organization: Drama Club</li>\n          </ul>\n        </div>\n\n        <!-- ‰∏™‰∫∫Áà±Â•Ω -->\n        <div class=\"profile-hobbies\">\n          <h3>üéØ Personal Hobbies</h3>\n          <ul>\n            <li>üéµ Music</li>\n            <li>üèÄ Basketball</li>\n            <li>üìñ Reading</li>\n          </ul>\n          <button class=\"edit-btn\" @click=\"goToEditProfile\">‚úèÔ∏è Edit Profile</button>\n        </div>\n\n        <div class=\"achievements\">\n          <h2>üèÜ Your Achievements</h2>\n          <div class=\"achievement-badge\">\n            <img src=\"/images/logo.png\" alt=\"UW Social Badge\">\n            <p>üéâ Congratulations! You have published 3 events!</p>\n          </div>\n          <div class=\"achievement-badge\">\n            <img src=\"/images/logo1.png\" alt=\"UW Social Badge\">\n            <p>ü§ù You have made 5 new friends!</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- ÂÖ∂‰ªñÂä®ÊÄÅÈ°µÈù¢ -->\n      <div v-show=\"currentSection === 'friends'\" class=\"profile-section\">\n        <h3>üë• My Friends</h3>\n        <ul>\n          <li>üßë‚Äçüíª Alex (Computer Science)</li>\n          <li>üé® Emily (Designer)</li>\n          <li>üéµ John (Music Club Member)</li>\n        </ul>\n      </div>\n\n      <div v-show=\"currentSection === 'recommendations'\" class=\"profile-section\">\n        <h3>‚ú® People You May Know</h3>\n        <ul>\n          <li>üîç Sophia (Business School)</li>\n          <li>üîç David (International Student)</li>\n          <li>üîç Mia (Artificial Intelligence)</li>\n        </ul>\n      </div>\n\n      <div v-show=\"currentSection === 'published'\" class=\"profile-section\">\n        <h3>üìÖ Published Events</h3>\n        <div class=\"event-list-horizontal\">\n          <div\n            v-for=\"event in publishedEvents\"\n            :key=\"event.id\"\n            class=\"event-card-horizontal\"\n            @click=\"openDetail(event)\"\n            style=\"cursor: pointer;\"\n          >\n            <h4>{{ event.title }}</h4>\n            <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n              <span>{{ formatDate(event.startime) }}</span>\n              <span>{{ event.location }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-show=\"currentSection === 'achievements'\" class=\"profile-section\">\n        <h3>üèÜ Your Achievements</h3>\n        <div class=\"achievement-badge\">\n          <img src=\"/images/logo.png\" alt=\"UW Social Badge\">\n          <p>üéâ Congratulations! You have published 3 events!</p>\n        </div>\n        <div class=\"achievement-badge\">\n          <img src=\"/images/logo1.png\" alt=\"UW Social Badge\">\n          <p>ü§ù You have made 5 new friends!</p>\n        </div>\n      </div>\n\n      <ElDialog v-model=\"isDialogOpen\" title=\"Event Details\" class=\"custom-dialog\">\n        <DetailCard v-if=\"selectedEvent\" :event=\"selectedEvent\" />\n      </ElDialog>\n    </main>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { reactive } from 'vue';\nimport { useUserStore } from '../stores/user'\nimport { useRouter } from 'vue-router'\nimport { getFirestore, collection, query, where, getDocs } from 'firebase/firestore'\nimport AvatarUpload from '../components/AvatarUpload.vue'\nimport DetailCard from '../components/DetailCard.vue';\nimport '../assets/profile.css';\nimport type { Event } from '../types/event';\n\nconst userStore = useUserStore()\nconst router = useRouter()\nconst currentSection = ref('default')\nconst db = getFirestore()\n\nconst showSection = (section: string) => {\n  currentSection.value = section\n}\n\nconst state = reactive({\n  currentSection: 'default',  // ÈªòËÆ§ÊòæÁ§∫‰∏™‰∫∫‰∏ªÈ°µ\n});\n\nfunction goToEditProfile() {\n  router.push('/profile/edit');\n}\n\nconst formatDate = (ts: any) => {\n  if (!ts) return '';\n  const date = typeof ts.toDate === 'function' ? ts.toDate() : new Date(ts);\n  return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n};\n\nonMounted(async () => {\n  if (!userStore.isLoggedIn) {\n    router.push('/login');\n    return;\n  }\n\n  try {\n    const eventsRef = collection(db, 'events');\n    const q = query(eventsRef, where('organizerId', '==', userStore.userProfile?.uid));\n    const querySnapshot = await getDocs(q);\n    publishedEvents.value = querySnapshot.docs.map(doc => {\n      const data = doc.data();\n      // Ê†ºÂºèÂåñ startime ‰∏∫ date Â≠óÊÆµ\n      let dateStr = '';\n      if (data.startime) {\n        const dateObj = typeof data.startime.toDate === 'function'\n          ? data.startime.toDate()\n          : new Date(data.startime);\n        dateStr = dateObj.toLocaleDateString() + ' ' + dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n      }\n      return {\n        id: doc.id,\n        title: data.title || '',\n        description: data.description || '',\n        location: data.location || '',\n        category: data.category || '',\n        tags: data.tags || [],\n        startime: data.startime,\n        endtime: data.endtime,\n        maxParticipants: data.maxParticipants ?? null,\n        organizerId: data.organizerId || '',\n        organizerName: data.organizerName || '',\n        organizerAvatar: data.organizerAvatar || '',\n        createdAt: data.createdAt || '',\n        participants: data.participants || [],\n        // ‰Ω†ÂèØ‰ª•Ê†πÊçÆ Event Á±ªÂûãÂÜçË°•ÂÖÖÂÖ∂ÂÆÉÂ≠óÊÆµ\n      };\n    });\n  } catch (error) {\n    console.error('Ëé∑ÂèñÂèëÂ∏ÉÁöÑÊ¥ªÂä®Â§±Ë¥•:', error);\n  }\n});\n\nconst publishedEvents = ref<Event[]>([]);\nconst participatedEvents = ref([]);\nconst isDialogOpen = ref(false);\nconst selectedEvent = ref<Event | null>(null);\n\nfunction openDetail(event: Event | { id: string; title: string; \n  description: string; startime: any; endtime: any; location: string; \n  category: string; imageUrl?: string | undefined; organizerId: string; \n  organizerName: string; organizerAvatar: string; createdAt: string; \n  participants: string[]; maxParticipants: number | null; tags: string[]; } | null) {\n  selectedEvent.value = event;\n  isDialogOpen.value = true;\n}\n</script>"],"names":["_imports_0","defaultAvatar","userStore","useUserStore","userAvatar","computed","_a","router","useRouter","currentSection","ref","db","getFirestore","showSection","section","reactive","goToEditProfile","formatDate","ts","date","onMounted","eventsRef","collection","q","query","where","querySnapshot","getDocs","publishedEvents","doc","data","dateStr","dateObj","error","isDialogOpen","selectedEvent","openDetail","event"],"mappings":"kPAAA,MAAeA,EAAA,kFCaTC,GAAgB,yEADtB,MAAMC,EAAYC,EAAa,EAGzBC,EAAaC,EAAS,IAAM,OACzB,QAAAC,EAAAJ,EAAU,cAAV,YAAAI,EAAuB,WAAYL,EAAA,CAC3C,mnBCuHD,MAAMC,EAAYC,EAAa,EACzBI,EAASC,EAAU,EACnBC,EAAiBC,EAAI,SAAS,EAC9BC,EAAKC,EAAa,EAElBC,EAAeC,GAAoB,CACvCL,EAAe,MAAQK,CACzB,EAEcC,EAAS,CACrB,eAAgB,SACjB,CAAA,EAED,SAASC,GAAkB,CACzBT,EAAO,KAAK,eAAe,CAAA,CAGvB,MAAAU,EAAcC,GAAY,CAC1B,GAAA,CAACA,EAAW,MAAA,GACV,MAAAC,EAAO,OAAOD,EAAG,QAAW,WAAaA,EAAG,OAAO,EAAI,IAAI,KAAKA,CAAE,EACxE,OAAOC,EAAK,qBAAuB,IAAMA,EAAK,mBAAmB,CAAC,EAAG,CAAE,KAAM,UAAW,OAAQ,UAAW,CAC7G,EAEAC,EAAU,SAAY,OAChB,GAAA,CAAClB,EAAU,WAAY,CACzBK,EAAO,KAAK,QAAQ,EACpB,MAAA,CAGE,GAAA,CACI,MAAAc,EAAYC,EAAWX,EAAI,QAAQ,EACnCY,EAAIC,EAAMH,EAAWI,EAAM,cAAe,MAAMnB,EAAAJ,EAAU,cAAV,YAAAI,EAAuB,GAAG,CAAC,EAC3EoB,EAAgB,MAAMC,EAAQJ,CAAC,EACrCK,EAAgB,MAAQF,EAAc,KAAK,IAAWG,GAAA,CAC9C,MAAAC,EAAOD,EAAI,KAAK,EAEtB,IAAIE,EAAU,GACd,GAAID,EAAK,SAAU,CACjB,MAAME,EAAU,OAAOF,EAAK,SAAS,QAAW,WAC5CA,EAAK,SAAS,OAAO,EACrB,IAAI,KAAKA,EAAK,QAAQ,EAC1BC,EAAUC,EAAQ,qBAAuB,IAAMA,EAAQ,mBAAmB,CAAC,EAAG,CAAE,KAAM,UAAW,OAAQ,UAAW,CAAA,CAE/G,MAAA,CACL,GAAIH,EAAI,GACR,MAAOC,EAAK,OAAS,GACrB,YAAaA,EAAK,aAAe,GACjC,SAAUA,EAAK,UAAY,GAC3B,SAAUA,EAAK,UAAY,GAC3B,KAAMA,EAAK,MAAQ,CAAC,EACpB,SAAUA,EAAK,SACf,QAASA,EAAK,QACd,gBAAiBA,EAAK,iBAAmB,KACzC,YAAaA,EAAK,aAAe,GACjC,cAAeA,EAAK,eAAiB,GACrC,gBAAiBA,EAAK,iBAAmB,GACzC,UAAWA,EAAK,WAAa,GAC7B,aAAcA,EAAK,cAAgB,CAAA,CAErC,CAAA,CACD,QACMG,EAAO,CACN,QAAA,MAAM,aAAcA,CAAK,CAAA,CACnC,CACD,EAEK,MAAAL,EAAkBlB,EAAa,EAAE,EACZA,EAAI,CAAE,CAAA,EAC3B,MAAAwB,EAAexB,EAAI,EAAK,EACxByB,EAAgBzB,EAAkB,IAAI,EAE5C,SAAS0B,EAAWC,EAIgE,CAClFF,EAAc,MAAQE,EACtBH,EAAa,MAAQ,EAAA"}