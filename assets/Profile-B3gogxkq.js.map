{"version":3,"file":"Profile-B3gogxkq.js","sources":["../../../../../../images/logo.png","../../src/components/AvatarUpload.vue","../../src/views/Profile.vue"],"sourcesContent":["export default \"__VITE_PUBLIC_ASSET__c3f4077f__\"","<template>\r\n  <div class=\"avatar-upload\">\r\n    <div class=\"avatar-preview\">\r\n      <img :src=\"userAvatar\" alt=\"用户头像\" class=\"avatar-image\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue';\r\nimport { useUserStore } from '../stores/user';\r\n\r\nconst userStore = useUserStore();\r\nconst defaultAvatar = '/public/images/default-avatar.jpg';\r\n\r\nconst userAvatar = computed(() => {\r\n  return userStore.userProfile?.photoURL || defaultAvatar;\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-upload {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.avatar-preview {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  border: 3px solid #b388eb;\r\n}\r\n\r\n.avatar-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n</style> ","<template>\r\n  <div class=\"profile-layout\">\r\n    <!-- 左侧：个人信息 + 侧边菜单 -->\r\n    <aside class=\"profile-sidebar\">\r\n      <div class=\"profile-card\">\r\n        <AvatarUpload />\r\n        <h2>👤 {{ userStore.userProfile?.displayName || 'User' }}</h2>\r\n      </div>\r\n\r\n      <div class=\"profile-menu\">\r\n        <ul>\r\n          <li><a href=\"#\" @click=\"showSection('default')\">🏠 Profile Home</a></li>\r\n          <!-- <li><a href=\"#\" @click=\"showSection('friends')\">👥 My Friends</a></li>\r\n          <li><a href=\"#\" @click=\"showSection('recommendations')\">✨ People You May Know</a></li> -->\r\n          <li><a href=\"#\" @click=\"showSection('published')\">📅 Published Events</a></li>\r\n          <!-- <li><a href=\"#\" @click=\"showSection('participated')\">🎯 Participated Events</a></li> -->\r\n          <li><a href=\"#\" @click=\"showSection('achievements')\">🏆 Your Achievement</a></li>\r\n        </ul>\r\n      </div>\r\n    </aside>\r\n\r\n    <!-- 右侧：个人信息和社交动态 -->\r\n    <main class=\"profile-main\">\r\n      <!-- 默认页面（基本信息 & 社交动态） -->\r\n      <div v-show=\"currentSection === 'default'\" id=\"default-content\">\r\n        <h2>👋 This is your profile!</h2>\r\n        \r\n        <!-- 个人信息 -->\r\n        <div class=\"profile-info\">\r\n          <h3>📄 Basic Information</h3>\r\n          <p>🎓 Major: Computer Science & Math</p>\r\n          <p>📞 Contact: {{ userStore.userProfile?.email }}</p>\r\n        </div>\r\n\r\n        <!-- 个人标签 -->\r\n        <div class=\"profile-tags\">\r\n          <h3>🏷️ Personal Tags</h3>\r\n          <ul>\r\n            <li>💻 Computer Science & Math</li>\r\n            <li>🏠 Dorm: McCarty Hall</li>\r\n            <li>🎭 Organization: Drama Club</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <!-- 个人爱好 -->\r\n        <div class=\"profile-hobbies\">\r\n          <h3>🎯 Personal Hobbies</h3>\r\n          <ul>\r\n            <li>🎵 Music</li>\r\n            <li>🏀 Basketball</li>\r\n            <li>📖 Reading</li>\r\n          </ul>\r\n          <button class=\"edit-btn\" @click=\"goToEditProfile\">✏️ Edit Profile</button>\r\n        </div>\r\n\r\n        <div class=\"achievements\">\r\n          <h2>🏆 Your Achievements</h2>\r\n          <div class=\"achievement-badge\">\r\n            <img src=\"/images/logo.png\" alt=\"UW Social Badge\">\r\n            <p>🎉 Congratulations! You have published 3 events!</p>\r\n          </div>\r\n          <div class=\"achievement-badge\">\r\n            <img src=\"/images/logo1.png\" alt=\"UW Social Badge\">\r\n            <p>🤝 You have made 5 new friends!</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 其他动态页面 -->\r\n      <div v-show=\"currentSection === 'friends'\" class=\"profile-section\">\r\n        <h3>👥 My Friends</h3>\r\n        <ul>\r\n          <li>🧑‍💻 Alex (Computer Science)</li>\r\n          <li>🎨 Emily (Designer)</li>\r\n          <li>🎵 John (Music Club Member)</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div v-show=\"currentSection === 'recommendations'\" class=\"profile-section\">\r\n        <h3>✨ People You May Know</h3>\r\n        <ul>\r\n          <li>🔍 Sophia (Business School)</li>\r\n          <li>🔍 David (International Student)</li>\r\n          <li>🔍 Mia (Artificial Intelligence)</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div v-show=\"currentSection === 'published'\" class=\"profile-section\">\r\n        <h3>📅 Published Events</h3>\r\n        <div class=\"event-list-horizontal\">\r\n          <div\r\n            v-for=\"event in publishedEvents\"\r\n            :key=\"event.id\"\r\n            class=\"event-card-horizontal\"\r\n            @click=\"openDetail(event)\"\r\n            style=\"cursor: pointer;\"\r\n          >\r\n            <h4>{{ event.title }}</h4>\r\n            <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n              <span>{{ formatDate(event.startime) }}</span>\r\n              <span>{{ event.location }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-show=\"currentSection === 'achievements'\" class=\"profile-section\">\r\n        <h3>🏆 Your Achievements</h3>\r\n        <div class=\"achievement-badge\">\r\n          <img src=\"/images/logo.png\" alt=\"UW Social Badge\">\r\n          <p>🎉 Congratulations! You have published 3 events!</p>\r\n        </div>\r\n        <div class=\"achievement-badge\">\r\n          <img src=\"/images/logo1.png\" alt=\"UW Social Badge\">\r\n          <p>🤝 You have made 5 new friends!</p>\r\n        </div>\r\n      </div>\r\n\r\n      <ElDialog v-model=\"isDialogOpen\" title=\"Event Details\" class=\"custom-dialog\">\r\n        <DetailCard v-if=\"selectedEvent\" :event=\"selectedEvent\" />\r\n      </ElDialog>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport { reactive } from 'vue';\r\nimport { useUserStore } from '../stores/user'\r\nimport { useRouter } from 'vue-router'\r\nimport { getFirestore, collection, query, where, getDocs } from 'firebase/firestore'\r\nimport AvatarUpload from '../components/AvatarUpload.vue'\r\nimport DetailCard from '../components/DetailCard.vue';\r\nimport '../assets/profile.css';\r\nimport type { Event } from '../types/event';\r\n\r\nconst userStore = useUserStore()\r\nconst router = useRouter()\r\nconst currentSection = ref('default')\r\nconst db = getFirestore()\r\n\r\nconst showSection = (section: string) => {\r\n  currentSection.value = section\r\n}\r\n\r\nconst state = reactive({\r\n  currentSection: 'default',  // 默认显示个人主页\r\n});\r\n\r\nfunction goToEditProfile() {\r\n  router.push('/profile/edit');\r\n}\r\n\r\nconst formatDate = (ts: any) => {\r\n  if (!ts) return '';\r\n  const date = typeof ts.toDate === 'function' ? ts.toDate() : new Date(ts);\r\n  return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n};\r\n\r\nonMounted(async () => {\r\n  if (!userStore.isLoggedIn) {\r\n    router.push('/login');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const eventsRef = collection(db, 'events');\r\n    const q = query(eventsRef, where('organizerId', '==', userStore.userProfile?.uid));\r\n    const querySnapshot = await getDocs(q);\r\n    publishedEvents.value = querySnapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      // 格式化 startime 为 date 字段\r\n      let dateStr = '';\r\n      if (data.startime) {\r\n        const dateObj = typeof data.startime.toDate === 'function'\r\n          ? data.startime.toDate()\r\n          : new Date(data.startime);\r\n        dateStr = dateObj.toLocaleDateString() + ' ' + dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n      }\r\n      return {\r\n        id: doc.id,\r\n        title: data.title || '',\r\n        description: data.description || '',\r\n        location: data.location || '',\r\n        category: data.category || '',\r\n        tags: data.tags || [],\r\n        startime: data.startime,\r\n        endtime: data.endtime,\r\n        maxParticipants: data.maxParticipants ?? null,\r\n        organizerId: data.organizerId || '',\r\n        organizerName: data.organizerName || '',\r\n        organizerAvatar: data.organizerAvatar || '',\r\n        createdAt: data.createdAt || '',\r\n        participants: data.participants || [],\r\n        // 你可以根据 Event 类型再补充其它字段\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('获取发布的活动失败:', error);\r\n  }\r\n});\r\n\r\nconst publishedEvents = ref<Event[]>([]);\r\nconst participatedEvents = ref([]);\r\nconst isDialogOpen = ref(false);\r\nconst selectedEvent = ref<Event | null>(null);\r\n\r\nfunction openDetail(event: Event | { id: string; title: string; \r\n  description: string; startime: any; endtime: any; location: string; \r\n  category: string; imageUrl?: string | undefined; organizerId: string; \r\n  organizerName: string; organizerAvatar: string; createdAt: string; \r\n  participants: string[]; maxParticipants: number | null; tags: string[]; } | null) {\r\n  selectedEvent.value = event;\r\n  isDialogOpen.value = true;\r\n}\r\n</script>"],"names":["_imports_0","defaultAvatar","userStore","useUserStore","userAvatar","computed","_a","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","router","useRouter","currentSection","ref","db","getFirestore","showSection","section","reactive","goToEditProfile","formatDate","ts","date","onMounted","eventsRef","collection","q","query","where","querySnapshot","getDocs","publishedEvents","doc","data","dateStr","dateObj","error","isDialogOpen","selectedEvent","openDetail","event","_hoisted_3","_createVNode","AvatarUpload","_toDisplayString","_unref","_hoisted_4","_hoisted_5","_withDirectives","_hoisted_6","_cache","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","$event","_hoisted_13","_hoisted_14","_imports_1","_component_ElDialog","_createBlock","DetailCard"],"mappings":"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"}