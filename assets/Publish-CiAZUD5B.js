import{d as f,p as S,r as p,k as v,c as g,g as t,C as l,I as i,K as V,G as E,t as U,L as k,q as w,o as c,T as m,M as q,x as _,N as C,_ as b,a as I}from"./main-V8uREbGC.js";import{u as N}from"./event-D73PKLgd.js";const F={class:"event-form"},$={class:"form-group"},A={class:"form-group"},M=["placeholder"],B={class:"form-row"},L={class:"form-group"},z={class:"form-group"},G={class:"form-row"},O={class:"form-group"},j={class:"form-group"},H={class:"form-group"},R={class:"form-group"},K={class:"form-group"},J={class:"form-group"},Q={class:"form-group"},W=["disabled"],X=f({__name:"EventForm",setup(y){const u=w(),n=S(),D=N(),r=p(!1),a=p({title:"",description:"",startDate:"",startTime:"",endDate:"",endTime:"",location:"",category:"",maxParticipants:null,tags:[],link:""}),d=v({get:()=>a.value.tags.join(", "),set:s=>{a.value.tags=s.split(",").map(e=>e.trim()).filter(Boolean)}}),T=v(()=>a.value.title?`Come and enjoy ${a.value.title}!`:"Describe your event here..."),x=async()=>{if(!n.userProfile){alert("Please log in to publish an event!");return}r.value=!0;try{const s=new Date(`${a.value.startDate}T${a.value.startTime}`),e=new Date(`${a.value.endDate}T${a.value.endTime}`);if(s>=e){alert("End time must be after start time.");return}const{maxParticipants:o,...ee}=a.value,P={title:a.value.title,description:a.value.description,location:a.value.location,category:a.value.category,tags:a.value.tags,startime:m.fromDate(s),endtime:m.fromDate(e),maxParticipants:a.value.maxParticipants,organizerId:n.userProfile.uid,organizerName:n.userProfile.displayName||"Anonymous",organizerAvatar:n.userProfile.photoURL||"",createdAt:new Date().toISOString(),participants:[],link:a.value.link};await q(_(C,"events"),P),alert("Successfully published!"),await D.fetchEvents(),u.push("/events")}catch(s){console.error("Failed to publish event:",s),alert("Failed to publish event.")}finally{r.value=!1}};return(s,e)=>(c(),g("div",F,[e[23]||(e[23]=t("h2",null,"Publish New Event",-1)),t("form",{onSubmit:k(x,["prevent"])},[t("div",$,[e[11]||(e[11]=t("label",{for:"title"},"Event Title",-1)),l(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=o=>a.value.title=o),type:"text",required:"",placeholder:"Enter event title"},null,512),[[i,a.value.title]])]),t("div",A,[e[12]||(e[12]=t("label",{for:"description"},"Description",-1)),l(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>a.value.description=o),type:"text",required:"",placeholder:T.value,rows:"3"},null,8,M),[[i,a.value.description]])]),t("div",B,[t("div",L,[e[13]||(e[13]=t("label",{for:"startDate"},"Start Date",-1)),l(t("input",{id:"startDate","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.startDate=o),type:"date",required:""},null,512),[[i,a.value.startDate]])]),t("div",z,[e[14]||(e[14]=t("label",{for:"startTime"},"Start Time",-1)),l(t("input",{id:"startTime","onUpdate:modelValue":e[3]||(e[3]=o=>a.value.startTime=o),type:"time",required:""},null,512),[[i,a.value.startTime]])])]),t("div",G,[t("div",O,[e[15]||(e[15]=t("label",{for:"endDate"},"End Date",-1)),l(t("input",{id:"endDate","onUpdate:modelValue":e[4]||(e[4]=o=>a.value.endDate=o),type:"date",required:""},null,512),[[i,a.value.endDate]])]),t("div",j,[e[16]||(e[16]=t("label",{for:"endTime"},"End Time",-1)),l(t("input",{id:"endTime","onUpdate:modelValue":e[5]||(e[5]=o=>a.value.endTime=o),type:"time",required:""},null,512),[[i,a.value.endTime]])])]),t("div",H,[e[17]||(e[17]=t("label",{for:"location"},"Location",-1)),l(t("input",{id:"location","onUpdate:modelValue":e[6]||(e[6]=o=>a.value.location=o),type:"text",required:"",placeholder:"Event location"},null,512),[[i,a.value.location]])]),t("div",R,[e[19]||(e[19]=t("label",{for:"category"},"Category",-1)),l(t("select",{id:"category","onUpdate:modelValue":e[7]||(e[7]=o=>a.value.category=o),required:""},e[18]||(e[18]=[E('<option value="" data-v-65a4f9ee>Select category</option><option value="Academic" data-v-65a4f9ee>Academic</option><option value="Club" data-v-65a4f9ee>Club</option><option value="Sports" data-v-65a4f9ee>Sports</option><option value="Games" data-v-65a4f9ee>Games</option><option value="Culture" data-v-65a4f9ee>Culture</option><option value="Interest" data-v-65a4f9ee>Interest</option><option value="HFS" data-v-65a4f9ee>HFS</option>',8)]),512),[[V,a.value.category]])]),t("div",K,[e[20]||(e[20]=t("label",{for:"maxParticipants"},"Max Participants (Optional)",-1)),l(t("input",{id:"maxParticipants","onUpdate:modelValue":e[8]||(e[8]=o=>a.value.maxParticipants=o),type:"number",min:"1",placeholder:"No limit if not set"},null,512),[[i,a.value.maxParticipants]])]),t("div",J,[e[21]||(e[21]=t("label",{for:"tags"},"Tags (comma separated)",-1)),l(t("input",{id:"tags","onUpdate:modelValue":e[9]||(e[9]=o=>d.value=o),type:"text",placeholder:"e.g., study, social, sports"},null,512),[[i,d.value]])]),t("div",Q,[e[22]||(e[22]=t("label",{for:"link"},"Event Link (Optional)",-1)),l(t("input",{id:"link","onUpdate:modelValue":e[10]||(e[10]=o=>a.value.link=o),type:"url",placeholder:"e.g., https://meeting.com/your-event"},null,512),[[i,a.value.link]])]),t("button",{type:"submit",class:"submit-btn",disabled:r.value},U(r.value?"Publishing...":"Publish!"),9,W)],32)]))}}),Y=b(X,[["__scopeId","data-v-65a4f9ee"]]),Z={class:"publish-page"},h=f({__name:"Publish",setup(y){return(u,n)=>(c(),g("div",Z,[I(Y)]))}}),oe=b(h,[["__scopeId","data-v-a735b856"]]);export{oe as default};
//# sourceMappingURL=Publish-CiAZUD5B.js.map
