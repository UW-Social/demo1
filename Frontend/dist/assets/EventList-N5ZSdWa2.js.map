{"version":3,"file":"EventList-N5ZSdWa2.js","sources":["../../src/components/EventCard.vue","../../src/components/EventList.vue"],"sourcesContent":["<template>\r\n  <div class=\"card event-card\" @click=\"handleCardClick\">\r\n    <!-- <img :src=\"event.imageUrl ? event.imageUrl : '/images/default-event.jpg'\" alt=\"event.title\" /> -->\r\n    <h3 :class=\"['event-title', `category-${event.category}`]\">{{ event.title }}</h3>\r\n    <p class=\"event-time\">\r\n      Starts at {{ formatDate(event.startime) }}<br>\r\n      Ends at {{ formatDate(event.endtime) }}\r\n    </p>\r\n    <p>Location: {{ event.location }}</p>\r\n    <p class=\"description\">{{ event.description }}</p>\r\n        <p v-if=\"event.link\" class=\"event-link\">\r\n      <a :href=\"event.link\" target=\"_blank\" rel=\"noopener noreferrer\">{{ event.link }}</a>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { useEventDialogStore } from '../stores/eventDialog';\r\nimport type { Event } from '../types/event';\r\nimport '../assets/eventcard.css';\r\n\r\nconst props = defineProps<{\r\n  event: Event;\r\n}>();\r\n\r\nconst eventDialogStore = useEventDialogStore();\r\n\r\n// 只显示年月日和小时分钟\r\nconst formatDate = (ts: any) => {\r\n  if (!ts) return '';\r\n  const date = typeof ts.toDate === 'function' ? ts.toDate() : new Date(ts);\r\n  // 获取时间和日期部分\r\n  const time = date.toLocaleTimeString(undefined, {\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    hour12: true,\r\n  });\r\n  const day = date.toLocaleDateString(undefined, {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n  });\r\n  return `${time} ${day}`;\r\n};\r\n\r\nconst handleCardClick = () => {\r\n  eventDialogStore.openDialog(props.event);\r\n};\r\n</script>\r\n","<template>\r\n  <div class=\"event-list\">\r\n    <div v-if=\"filteredEvents.length === 0\" class=\"loading\">No events found.</div>\r\n    <div v-else class=\"events-grid\">\r\n      <EventCard\r\n        v-for=\"event in filteredEvents\"\r\n        :key=\"event.id\"\r\n        :event=\"event\"\r\n        @open-card=\"$emit('open-card', event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted } from 'vue';\r\nimport { useEventStore } from '../stores/event';\r\nimport EventCard from './EventCard.vue';\r\n\r\nconst props = defineProps<{ category?: string }>();\r\nconst eventStore = useEventStore();\r\n\r\nconst filteredEvents = computed(() => {\r\n  let events = !props.category\r\n    ? eventStore.events\r\n    : eventStore.events.filter(e => e.category === props.category);\r\n\r\n  // 只显示未过期活动\r\n  const now = new Date();\r\n  events = events.filter(e => {\r\n    const end = typeof e.endtime?.toDate === 'function'\r\n      ? e.endtime.toDate()\r\n      : new Date(e.endtime);\r\n    return end > now;\r\n  });\r\n\r\n  // 按开始时间倒序\r\n  return events.slice().sort((a, b) => {\r\n    const aTime = typeof a.startime?.toDate === 'function' ? a.startime.toDate() : new Date(a.startime);\r\n    const bTime = typeof b.startime?.toDate === 'function' ? b.startime.toDate() : new Date(b.startime);\r\n    return bTime.getTime() - aTime.getTime();\r\n  });\r\n});\r\n\r\nonMounted(() => {\r\n    if (eventStore.events.length === 0) {\r\n        eventStore.fetchEvents();\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.event-list {\r\n    padding: 2rem;\r\n}\r\n\r\n.loading,\r\n.no-events {\r\n    text-align: center;\r\n    padding: 2rem;\r\n    color: #666;\r\n    font-size: 1.1rem;\r\n}\r\n\r\n.events-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(3, 1fr); /* 固定3列 */\r\n    gap: 2rem;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    padding: 1rem 0;\r\n}\r\n\r\n@media (max-width: 900px) {\r\n    .events-grid {\r\n        grid-template-columns: repeat(2, 1fr);\r\n    }\r\n}\r\n@media (max-width: 600px) {\r\n    .events-grid {\r\n        grid-template-columns: 1fr;\r\n    }\r\n}\r\n</style>"],"names":["props","__props","eventDialogStore","useEventDialogStore","formatDate","ts","date","time","day","handleCardClick","_createElementBlock","_createElementVNode","_normalizeClass","event","_hoisted_1","_createTextVNode","_toDisplayString","_hoisted_2","_openBlock","_hoisted_3","_hoisted_4","eventStore","useEventStore","filteredEvents","computed","events","now","_a","a","b","aTime","_b","onMounted","_Fragment","_renderList","_createBlock","EventCard","$event","$emit"],"mappings":"gUAqBA,MAAMA,EAAQC,EAIRC,EAAmBC,EAAoB,EAGvCC,EAAcC,GAAY,CAC1B,GAAA,CAACA,EAAW,MAAA,GACV,MAAAC,EAAO,OAAOD,EAAG,QAAW,WAAaA,EAAG,OAAO,EAAI,IAAI,KAAKA,CAAE,EAElEE,EAAOD,EAAK,mBAAmB,OAAW,CAC9C,KAAM,UACN,OAAQ,UACR,OAAQ,EAAA,CACT,EACKE,EAAMF,EAAK,mBAAmB,OAAW,CAC7C,KAAM,UACN,MAAO,UACP,IAAK,SAAA,CACN,EACM,MAAA,GAAGC,CAAI,IAAIC,CAAG,EACvB,EAEMC,EAAkB,IAAM,CACXP,EAAA,WAAWF,EAAM,KAAK,CACzC,oBA9CEU,EAYM,MAAA,CAZD,MAAM,kBAAmB,QAAOD,CAAA,GAEnCE,EAAiF,KAAA,CAA5E,MAAKC,EAAA,CAAA,cAAA,YAA8BC,EAAK,MAAC,QAAQ,EAAA,CAAA,GAAQA,EAAAA,EAAAA,MAAM,KAAK,EAAA,CAAA,EACzEF,EAGI,IAHJG,EAGI,CAHkBC,EAAA,cACPC,EAAAZ,EAAWS,EAAAA,MAAM,QAAQ,CAAA,EAAA,CAAA,cAAIF,EAAI,KAAA,KAAA,KAAA,EAAA,GAAAI,EAAA,YACnCC,EAAAZ,EAAWS,EAAAA,MAAM,OAAO,CAAA,EAAA,CAAA,CAAA,GAErCF,EAAqC,IAAlC,KAAA,aAAaE,EAAAA,EAAAA,MAAM,QAAQ,EAAA,CAAA,EAC9BF,EAAkD,IAAlDM,EAA0BJ,EAAAA,EAAAA,MAAM,WAAW,EAAA,CAAA,EAC9BA,EAAAA,MAAM,MAAfK,EAAA,EAAAR,EAEA,IAFAS,EAEA,CADFR,EAAoF,IAAA,CAAhF,KAAME,EAAK,MAAC,KAAM,OAAO,SAAS,IAAI,qBAAA,EAAyBA,EAAAA,EAAAA,MAAM,IAAI,EAAA,EAAAO,CAAA,CAAA,uJCQnF,MAAMpB,EAAQC,EACRoB,EAAaC,EAAc,EAE3BC,EAAiBC,EAAS,IAAM,CACpC,IAAIC,EAAUzB,EAAM,SAEhBqB,EAAW,OAAO,OAAO,GAAK,EAAE,WAAarB,EAAM,QAAQ,EAD3DqB,EAAW,OAIT,MAAAK,MAAU,KACP,OAAAD,EAAAA,EAAO,OAAY,GAAA,OAI1B,OAHY,QAAOE,EAAA,EAAE,UAAF,YAAAA,EAAW,SAAW,WACrC,EAAE,QAAQ,OAAO,EACjB,IAAI,KAAK,EAAE,OAAO,GACTD,CAAA,CACd,EAGMD,EAAO,MAAM,EAAE,KAAK,CAACG,EAAGC,IAAM,SACnC,MAAMC,EAAQ,QAAOH,EAAAC,EAAE,WAAF,YAAAD,EAAY,SAAW,WAAaC,EAAE,SAAS,OAAO,EAAI,IAAI,KAAKA,EAAE,QAAQ,EAElG,OADc,QAAOG,EAAAF,EAAE,WAAF,YAAAE,EAAY,SAAW,WAAaF,EAAE,SAAS,OAAO,EAAI,IAAI,KAAKA,EAAE,QAAQ,GACrF,UAAYC,EAAM,QAAQ,CAAA,CACxC,CAAA,CACF,EAED,OAAAE,EAAU,IAAM,CACRX,EAAW,OAAO,SAAW,GAC7BA,EAAW,YAAY,CAC3B,CACH,UA/CCH,EAAA,EAAAR,EAUM,MAVNI,EAUM,CATOS,EAAA,MAAe,SAAM,OAAhCb,EAA8E,MAA9EO,EAAwD,kBAAgB,IACxEC,EAAA,EAAAR,EAOM,MAPNS,EAOM,QANJT,EAKEuB,EAAA,KAAAC,EAJgBX,EAAc,MAAvBV,QADTsB,EAKEC,EAAA,CAHC,IAAKvB,EAAM,GACX,MAAAA,EACA,WAASwB,GAAEC,EAAK,MAAA,YAAczB,CAAK"}