import{d as f,g as S,k as p,j as v,c,b as e,y as l,G as i,K as V,A as E,v as U,L as k,i as w,T as m,M as _,p as q,N,o as g,_ as b,e as F}from"./main-hJlMxpLw.js";import{u as $}from"./event-SlV5Bnt4.js";const I={class:"event-form"},A={class:"form-group"},C={class:"form-group"},M=["placeholder"],B={class:"form-row"},L={class:"form-group"},j={class:"form-group"},z={class:"form-row"},O={class:"form-group"},G={class:"form-group"},H={class:"form-group"},R={class:"form-group"},K={class:"form-group"},J={class:"form-group"},Q={class:"form-group"},W=["disabled"],X=f({__name:"EventForm",setup(y){const d=w(),n=S(),D=$(),r=p(!1),a=p({title:"",description:"",startDate:"",startTime:"",endDate:"",endTime:"",location:"",category:"",maxParticipants:null,tags:[],link:""}),u=v({get:()=>a.value.tags.join(", "),set:s=>{a.value.tags=s.split(",").map(t=>t.trim()).filter(Boolean)}}),T=v(()=>a.value.title?`Come and enjoy ${a.value.title}!`:"Describe your event here..."),P=async()=>{if(!n.userProfile){alert("Please log in to publish an event!");return}r.value=!0;try{const s=new Date(`${a.value.startDate}T${a.value.startTime}`),t=new Date(`${a.value.endDate}T${a.value.endTime}`);if(s>=t){alert("End time must be after start time.");return}const{maxParticipants:o,...tt}=a.value,x={title:a.value.title,description:a.value.description,location:a.value.location,category:a.value.category,tags:a.value.tags,startime:m.fromDate(s),endtime:m.fromDate(t),maxParticipants:a.value.maxParticipants,organizerId:n.userProfile.uid,organizerName:n.userProfile.displayName||"Anonymous",organizerAvatar:n.userProfile.photoURL||"",createdAt:new Date().toISOString(),participants:[],link:a.value.link};await _(q(N,"events"),x),alert("Successfully published!"),await D.fetchEvents(),d.push("/events")}catch(s){console.error("Failed to publish event:",s),alert("Failed to publish event.")}finally{r.value=!1}};return(s,t)=>(g(),c("div",I,[t[23]||(t[23]=e("h2",null,"Publish New Event",-1)),e("form",{onSubmit:k(P,["prevent"])},[e("div",A,[t[11]||(t[11]=e("label",{for:"title"},"Event Title",-1)),l(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>a.value.title=o),type:"text",required:"",placeholder:"Enter event title"},null,512),[[i,a.value.title]])]),e("div",C,[t[12]||(t[12]=e("label",{for:"description"},"Description",-1)),l(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.description=o),type:"text",required:"",placeholder:T.value,rows:"3"},null,8,M),[[i,a.value.description]])]),e("div",B,[e("div",L,[t[13]||(t[13]=e("label",{for:"startDate"},"Start Date",-1)),l(e("input",{id:"startDate","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.startDate=o),type:"date",required:""},null,512),[[i,a.value.startDate]])]),e("div",j,[t[14]||(t[14]=e("label",{for:"startTime"},"Start Time",-1)),l(e("input",{id:"startTime","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.startTime=o),type:"time",required:""},null,512),[[i,a.value.startTime]])])]),e("div",z,[e("div",O,[t[15]||(t[15]=e("label",{for:"endDate"},"End Date",-1)),l(e("input",{id:"endDate","onUpdate:modelValue":t[4]||(t[4]=o=>a.value.endDate=o),type:"date",required:""},null,512),[[i,a.value.endDate]])]),e("div",G,[t[16]||(t[16]=e("label",{for:"endTime"},"End Time",-1)),l(e("input",{id:"endTime","onUpdate:modelValue":t[5]||(t[5]=o=>a.value.endTime=o),type:"time",required:""},null,512),[[i,a.value.endTime]])])]),e("div",H,[t[17]||(t[17]=e("label",{for:"location"},"Location",-1)),l(e("input",{id:"location","onUpdate:modelValue":t[6]||(t[6]=o=>a.value.location=o),type:"text",required:"",placeholder:"Event location"},null,512),[[i,a.value.location]])]),e("div",R,[t[19]||(t[19]=e("label",{for:"category"},"Category",-1)),l(e("select",{id:"category","onUpdate:modelValue":t[7]||(t[7]=o=>a.value.category=o),required:""},t[18]||(t[18]=[E('<option value="" data-v-caa83da3>Select category</option><option value="academic" data-v-caa83da3>Academic</option><option value="club" data-v-caa83da3>Club</option><option value="sports" data-v-caa83da3>Sports</option><option value="games" data-v-caa83da3>Games</option><option value="culture" data-v-caa83da3>Culture</option><option value="interest" data-v-caa83da3>Interest</option><option value="HFS" data-v-caa83da3>HFS</option>',8)]),512),[[V,a.value.category]])]),e("div",K,[t[20]||(t[20]=e("label",{for:"maxParticipants"},"Max Participants (Optional)",-1)),l(e("input",{id:"maxParticipants","onUpdate:modelValue":t[8]||(t[8]=o=>a.value.maxParticipants=o),type:"number",min:"1",placeholder:"No limit if not set"},null,512),[[i,a.value.maxParticipants]])]),e("div",J,[t[21]||(t[21]=e("label",{for:"tags"},"Tags (comma separated)",-1)),l(e("input",{id:"tags","onUpdate:modelValue":t[9]||(t[9]=o=>u.value=o),type:"text",placeholder:"e.g., study, social, sports"},null,512),[[i,u.value]])]),e("div",Q,[t[22]||(t[22]=e("label",{for:"link"},"Event Link (Optional)",-1)),l(e("input",{id:"link","onUpdate:modelValue":t[10]||(t[10]=o=>a.value.link=o),type:"url",placeholder:"e.g., https://meeting.com/your-event"},null,512),[[i,a.value.link]])]),e("button",{type:"submit",class:"submit-btn",disabled:r.value},U(r.value?"Publishing...":"Publish!"),9,W)],32)]))}}),Y=b(X,[["__scopeId","data-v-caa83da3"]]),Z={class:"publish-page"},h=f({__name:"Publish",setup(y){return(d,n)=>(g(),c("div",Z,[F(Y)]))}}),ot=b(h,[["__scopeId","data-v-bfe21250"]]);export{ot as default};
//# sourceMappingURL=Publish-w-kPm7zL.js.map
